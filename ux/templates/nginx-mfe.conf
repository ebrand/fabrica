# Standard nginx configuration for Micro-Frontend (MFE) services
# This template should be used for all MFE services to ensure consistent CORS handling

server {
    listen ${PORT};

    location / {
        root /usr/share/nginx/html;
        try_files $uri /index.html;

        # CORS headers for Module Federation
        # Required to allow host applications to load remote modules from this MFE
        add_header "Access-Control-Allow-Origin" "*" always;
        add_header "Access-Control-Allow-Methods" "GET, OPTIONS" always;
        add_header "Access-Control-Allow-Headers" "Content-Type, Authorization" always;

        # Handle preflight requests
        if ($request_method = OPTIONS) {
            return 204;
        }
    }
}
